# 热搜驱动交易系统类结构说明

## 系统架构概述

热搜驱动交易系统采用模块化设计，将整个交易流程分为五个主要阶段：信号筛选、关联分析、交易决策、实时监控和反馈优化。系统通过多智能体协作完成交易决策和执行。

## 模块结构

### 1. 基础层 (Base Layer)

#### 1.1 数据采集模块
- `SocialMediaCrawler`: 社交媒体爬虫基类
- `SocialMediaCrawlerFactory`: 社交媒体爬虫工厂
- `UniversalRssCrawler`: 通用RSS爬虫
- `HotsearchProcessor`: 热搜数据处理器
- `DataNormalizationService`: 数据标准化服务

#### 1.2 数据存储模块
- `TimeSeriesDataRepository`: 时序数据存储库
- `MarketDataRepository`: 市场数据存储库
- `HotsearchHistoryRepository`: 热搜历史数据存储库
- `HotSearchRecordRepository`: 热搜记录存储库
- `StockInfoRepository`: 股票信息存储库

### 2. 信号筛选层 (Signal Filtering Layer)

#### 2.1 信号处理模块
- `HeatBurstDetector`: 热度爆发检测器
- `PropagationSpeedMeter`: 传播速度测量器
- `PropagationSpeedCalculator`: 传播速度计算器
- `TrendPredictionService`: 趋势预测服务
- `SentimentQuantifier`: 情感量化器
- `SentimentAnalyzer`: 情感分析器
- `AuthenticityVerifier`: 真实性验证器
- `ContentVerifier`: 内容真实性验证器
- `CrossSourceValidator`: 跨源验证器
- `HistoricalPatternMatcher`: 历史模式匹配器
- `StockCorrelationAnalyzer`: 股票相关性分析器

#### 2.2 评分系统模块
- `MultiDimensionalScorer`: 多维度评分器
- `ThresholdEvaluator`: 阈值评估器
- `StageGatewayService`: 阶段门控服务

### 3. 关联分析层 (Correlation Analysis Layer)

#### 3.1 股票关联模块
- `StockMatcher`: 股票匹配器
- `ConceptStockIdentifier`: 概念股识别器
- `IndustryChainAnalyzer`: 产业链分析器

#### 3.2 股票筛选模块
- `LeaderStockIdentifier`: 龙头股识别器
- `StockGroupingService`: 股票分组服务
- `OptimalCandidateSelector`: 最优候选股选择器

#### 3.3 历史验证模块
- `PatternRecognizer`: 模式识别器
- `HistoricalReactionAnalyzer`: 历史反应分析器
- `RiskAssessmentService`: 风险评估服务

### 4. 交易决策层 (Trading Decision Layer)

#### 4.1 策略生成模块
- `EntryTimingOptimizer`: 入场策略优化器
- `PositionSizeCalculator`: 仓位计算器
- `RiskControlPlanner`: 风险控制计划器
- `StrategyGenerationFactory`: 策略生成工厂

#### 4.2 执行计划模块
- `ProfitTargetCalculator`: 盈利目标计算器
- `ExecutionSequencer`: 执行顺序安排器
- `HedgingStrategyGenerator`: 对冲策略生成器

#### 4.3 交易执行模块
- `OrderManager`: 订单管理器
- `ExecutionRouter`: 执行路由器
- `TransactionRecorder`: 交易记录器

### 5. 实时监控层 (Real-Time Monitoring Layer)

#### 5.1 热搜监控模块
- `HeatTrendTracker`: 热度趋势跟踪器
- `SentimentEvolutionAnalyzer`: 情绪演变分析器
- `TopicDriftDetector`: 话题漂移检测器

#### 5.2 市场监控模块
- `PriceBehaviorValidator`: 价格行为验证器
- `AnomalyDetector`: 异常检测器
- `MarketReactionEvaluator`: 市场反应评估器

#### 5.3 调整决策模块
- `AdaptiveStopLossAdjuster`: 自适应止损调整器
- `ProfitStrategyOptimizer`: 获利策略优化器
- `ExitSignalGenerator`: 退出信号生成器

### 6. 反馈优化层 (Feedback Optimization Layer)

#### 6.1 交易分析模块
- `PostTradeAnalyzer`: 交易后分析器
- `StrategyEffectivenessEvaluator`: 策略有效性评估器
- `PerformanceMetricsCalculator`: 性能指标计算器

#### 6.2 学习优化模块
- `PatternLibraryUpdater`: 模式库更新器
- `ParameterAutoTuner`: 参数自动调优器
- `CrossMarketCorrelationLearner`: 跨市场相关性学习器

### 7. 多智能体协调层 (Multi-Agent Coordination Layer)

#### 7.1 智能体管理模块
- `AgentFactory`: 智能体工厂
- `AgentCoordinator`: 智能体协调器
- `TaskDistributor`: 任务分发器

#### 7.2 知识共享模块
- `SharedKnowledgeBase`: 共享知识库
- `InformationBroker`: 信息中介器
- `ConsensusBuilder`: 共识构建器

### 8. 系统流程控制 (System Flow Control)

- `WorkflowOrchestrator`: 工作流编排器
- `StageTransitionController`: 阶段转换控制器
- `ParallelTaskCoordinator`: 并行任务协调器

## 工厂类设计

1. `AgentFactory`: 负责创建不同职责的AI智能体
2. `SocialMediaCrawlerFactory`: 创建不同社交平台的数据采集器
3. `ScoreEvaluatorFactory`: 创建不同维度的评分器
4. `StockAnalyzerFactory`: 创建不同类型的股票分析器
5. `StrategyGenerationFactory`: 创建不同类型的交易策略生成器
6. `MonitorFactory`: 创建不同类型的监控器
7. `ImpactAssessmentFactory`: 创建不同类型的影响评估器
8. `SignalCaptureFactory`: 创建不同类型的信号捕获器

## 数据传输对象 (DTO)

1. `ChatRequest`: AI聊天请求
2. `ChatResponse`: AI聊天响应
3. `BacktestResult`: 回测结果
4. `EntryTimingResult`: 入场时机结果
5. `ExitStrategyResult`: 退出策略结果
6. `HotSearchData`: 热搜数据
7. `ImpactAssessmentResult`: 影响评估结果
8. `PortfolioAdjustmentResult`: 投资组合调整结果
9. `PositionSizeResult`: 仓位大小结果
10. `RiskControlResult`: 风险控制结果
11. `SignalFilterResult`: 信号过滤结果
12. `StockCorrelationResult`: 股票相关性结果
13. `StockGroupResult`: 股票分组结果
14. `TradingStrategyResult`: 交易策略结果

## 实体类 (Entity)

1. `HotSearchRecord`: 热搜记录实体
2. `StockInfo`: 股票信息实体
3. `TradingRecord`: 交易记录实体

## 服务接口 (Service)

1. `AiService`: AI服务接口
2. `DataAcquisitionService`: 数据采集服务
3. `SignalProcessingService`: 信号处理服务

## 控制器 (Controller)

1. `AiController`: AI控制器
2. `SignalController`: 信号控制器

## 枚举类 (Enum)

1. `AiModelEnum`: AI模型枚举 