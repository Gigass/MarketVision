spring:
  application:
    name: market-vision
  
  # 数据库配置
  datasource:
    # 默认使用H2内存数据库，便于开发和测试
    url: jdbc:p6spy:h2:mem:marketvision;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    username: sa
    password: 
    driver-class-name: com.p6spy.engine.spy.P6SpyDriver
  
  # H2控制台配置
  h2:
    console:
      enabled: true
      path: /h2-console
  
  # AI模型配置
  ai:
    openai:
      api-key: ${OPENAI_API_KEY:your-api-key}
      base-url: ${OPENAI_BASE_URL:https://api.openai.com}
      model: gpt-4-turbo-preview

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /api

# 日志配置
logging:
  level:
    root: INFO
    com.gigass: DEBUG
    com.gigass.trading.repository: DEBUG
    org.springframework.web: INFO
    org.hibernate: INFO
  file:
    name: logs/market-vision.log
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# 热搜采集配置
hotsearch:
  crawler:
    weibo:
      url: https://s.weibo.com/top/summary
      interval: 600000  # 10分钟
    baidu:
      url: https://top.baidu.com/board?tab=realtime
      interval: 600000  # 10分钟
    zhihu:
      url: https://www.zhihu.com/hot
      interval: 600000  # 10分钟

# 监控配置
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

# MyBatis Plus 配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  global-config:
    db-config:
      id-type: auto
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
